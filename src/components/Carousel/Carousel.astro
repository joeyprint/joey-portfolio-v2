---
// Swiper Document - https://swiperjs.com/element#installation
import type { HTMLAttributes } from 'astro/types';
import { cn } from '@/lib/utils';

import 'swiper/css';

interface Props extends HTMLAttributes<'div'> {}

const { ...restProps } = Astro.props;
---

<script>
	import { register } from 'swiper/element/bundle';
	register();

	const swiperEls = document.querySelectorAll('swiper-container');
	swiperEls.forEach((swiperEl) => {
		const swiperParams = {
			spaceBetween: 24,
			loop: true,
			slidesToScroll: 1,
			autoplay: {
				delay: 1500,
				disableOnInteraction: false
			},
			breakpoints: {
				0: { slidesPerView: 1.5 },
				640: { slidesPerView: 2.5 },
				768: { slidesPerView: 3.5 },
				1200: { slidesPerView: 5.5 }
			}
		};

		if (swiperEl) {
			Object.assign(swiperEl, swiperParams);
			swiperEl.initialize();
		}
	});
</script>

<swiper-container init="false" {...restProps} class={cn('max-w-[1200px] w-full', restProps.class)}>
	<slot />
</swiper-container>
